title: Schéma JSON de gestion des thèmes Ecosphères
$id: https://github.com/benoitdavidfr/themesecospheres/blob/main/thespheres.schema.yaml
$schema: http://json-schema.org/schema#
definitions:
  Uri:
    description: URI
    type: string
    pattern: '^https?://'
  CompactUri:
    description: URI compacté
    type: string
    pattern: '^[a-zA-Z]+:[a-zA-Z0-9]+'
  Label:
    description: un libellé dans une ou pluiseurs langues, x pour neutre
    type: object
    additionalProperties: false
    patternProperties:
      '^(fr|en|x)$': # on se limite pour le moment à 2 langues + neutre
        type: string
    examples:
      - {fr: un libellé en français}
      - {fr: un libellé en français et en anglais, en: in english}
      - {x: un libellé dans aucune langue}
  Objects:
    description: la partie objets associée à un sujet et un prédicat
    oneOf:
      - description: une URI
        $ref: '#/definitions/Uri'
      - description: une liste d'URI
        type: array
        items:
          $ref: '#/definitions/Uri'
      - description: URI compacté
        $ref: '#/definitions/CompactUri'
      - description: liste d'URI compactés
        type: array
        items:
          $ref: '#/definitions/CompactUri'
      - description: un libellé dans une ou plusieurs langues, x pour neutre
        $ref: '#/definitions/Label'
      - description: une liste de libellés, chacun en une ou plusieurs langues, x pour neutre
        type: array
        items:
          $ref: '#/definitions/Label'
      - description: |
          un ensemble de triplets, chaque sujet comme clé sous la forme d'un URI compacté
          et les prédicats-objets associés comme valeurs.
        type: object
        additionalProperties: false
        patternProperties:
           '^[a-z]+:[-a-zA-Z0-9]+$': # sujet comme compactUri
            $ref: '#/definitions/PredicatesObjects'
  PredicatesObjects:
    description: |
      la partie prédicats-objets d'un triplet, le prédicat comme clé sous la forme d'un URI compacté
      et les objets associés comme valeurs.
    type: object
    additionalProperties: false
    patternProperties:
      '^[a-z]+:[a-zA-Z]+$': # le prédicat
        $ref: '#/definitions/Objects'
type: object
additionalProperties: false
properties:
  title:
    description: titre du document
    type: string
  description:
    description: commentaires sur le document
    type: string
  $schema:
    description: schema JSON du document
    oneOf:
      - $ref: http://json-schema.org/schema#
      - type: string
  prefix:
    description: |
      dictionnaire des prefixes utilisés avec pour chacun comme clé la chaine utilisée comme prefixe
      et en valeur l'URI correspondante
    type: object
    additionalProperties: false
    patternProperties:
      '^[a-z]+': # en clé la chaine utilisée pour représenter le prefixe
        description: l'URI du prefixe
        $ref: '#/definitions/Uri'
  skos:ConceptScheme:
    description: |
      définition du scheme par défaut à tous les concepts, le champ @id donne l'URI compactée
    additionalProperties: false
    patternProperties:
      '^([a-z]+:[a-zA-Z]+)|@id$':
        $ref: '#/definitions/Objects'
  skos:Concept:
    description: |
      ensemble de triplets structuré en forêt d'arbres avec le sujet comme clé et les prédicats-objets
      comme valeurs.
    additionalProperties: false
    patternProperties:
      '^[a-z]+:[-a-zA-Z]+$': # le sujet
        $ref: '#/definitions/PredicatesObjects'
  eof:
    description: marque de fin de fichier
    type: 'null'
